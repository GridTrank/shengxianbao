(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Login-Login"],{"0e13":function(e,t,n){"use strict";n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={props:{seconds:{type:[String,Number],default:uni.$u.props.code.seconds},startText:{type:String,default:uni.$u.props.code.startText},changeText:{type:String,default:uni.$u.props.code.changeText},endText:{type:String,default:uni.$u.props.code.endText},keepRunning:{type:Boolean,default:uni.$u.props.code.keepRunning},uniqueKey:{type:String,default:uni.$u.props.code.uniqueKey}}};t.default=i},"28d0":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */.page_wrap .input_wrap[data-v-1646070b]{padding:%?30?%;background-color:#fff}.page_wrap .input_wrap[data-v-1646070b] .u-input{padding:%?12?% 0!important}.page_wrap .input_wrap[data-v-1646070b] .input_item{width:100%!important}.page_wrap .input_wrap[data-v-1646070b] .u-form-item__body__right__message{margin:0!important}.page_wrap .input_wrap .input_item .label[data-v-1646070b]{color:#333;font-size:%?32?%;margin-right:%?80?%}.page_wrap .input_wrap .input_item .forget[data-v-1646070b]{color:#fe5b07;font-size:%?28?%}.page_wrap .input_wrap .input_item .get_code[data-v-1646070b]{color:#fd4d00;font-size:%?28?%}.page_wrap .agreement[data-v-1646070b]{margin-top:%?80?%;color:#666;font-size:%?24?%}.page_wrap .agreement uni-image[data-v-1646070b]{width:%?34?%;margin-right:%?10?%}.page_wrap .agreement .link[data-v-1646070b]{color:#fe5b07}.page_wrap .btn[data-v-1646070b]{height:%?100?%;line-height:%?100?%;text-align:center;color:#fff;font-size:%?36?%;border-radius:%?50?%;background:linear-gradient(136deg,#f87523,#fd1d20);margin:auto;margin-top:%?50?%;width:90%}.page_wrap .code[data-v-1646070b]{color:#f87523;background:#fff;border:%?2?% solid #f87523}',""]),e.exports=t},"2e0f":function(e,t,n){var i=n("28d0");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("09e66b92",i,!0,{sourceMap:!1,shadowMode:!1})},"390f":function(e,t,n){"use strict";var i=n("2e0f"),a=n.n(i);a.a},"3a12":function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-code"})},o=[]},"49e6":function(e,t,n){"use strict";n.r(t);var i=n("5431"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},5431:function(e,t,n){"use strict";var i=n("4ea4");n("a9e3"),n("ac1f"),n("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("0e13")),o={name:"u-code",mixins:[uni.$u.mpMixin,uni.$u.mixin,a.default],data:function(){return{secNum:this.seconds,timer:null,canGetCode:!0}},mounted:function(){this.checkKeepRunning()},watch:{seconds:{immediate:!0,handler:function(e){this.secNum=e}}},methods:{checkKeepRunning:function(){var e=Number(uni.getStorageSync(this.uniqueKey+"_$uCountDownTimestamp"));if(!e)return this.changeEvent(this.startText);var t=Math.floor(+new Date/1e3);this.keepRunning&&e&&e>t?(this.secNum=e-t,uni.removeStorageSync(this.uniqueKey+"_$uCountDownTimestamp"),this.start()):this.changeEvent(this.startText)},start:function(){var e=this;this.timer&&(clearInterval(this.timer),this.timer=null),this.$emit("start"),this.canGetCode=!1,this.changeEvent(this.changeText.replace(/x|X/,this.secNum)),this.setTimeToStorage(),this.timer=setInterval((function(){--e.secNum?e.changeEvent(e.changeText.replace(/x|X/,e.secNum)):(clearInterval(e.timer),e.timer=null,e.changeEvent(e.endText),e.secNum=e.seconds,e.$emit("end"),e.canGetCode=!0)}),1e3)},reset:function(){this.canGetCode=!0,clearInterval(this.timer),this.secNum=this.seconds,this.changeEvent(this.endText)},changeEvent:function(e){this.$emit("change",e)},setTimeToStorage:function(){if(this.keepRunning&&this.timer&&this.secNum>0&&this.secNum<=this.seconds){var e=Math.floor(+new Date/1e3);uni.setStorage({key:this.uniqueKey+"_$uCountDownTimestamp",data:e+Number(this.secNum)})}}},beforeDestroy:function(){this.setTimeToStorage(),clearTimeout(this.timer),this.timer=null}};t.default=o},"587c":function(e,t,n){var i=n("94d6");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("4f06").default;a("a4edf7e8",i,!0,{sourceMap:!1,shadowMode:!1})},"79ab":function(e,t,n){"use strict";n.r(t);var i=n("3a12"),a=n("49e6");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("92e0");var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"4d11c728",null,!1,i["a"],s);t["default"]=u.exports},"92e0":function(e,t,n){"use strict";var i=n("587c"),a=n.n(i);a.a},"94d6":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\r\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\r\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \r\n */\r\n\r\n',""]),e.exports=t},adb0:function(e,t,n){"use strict";n.r(t);var i=n("ce9b"),a=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},b5d9:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uForm:n("813e").default,uFormItem:n("b0af").default,uInput:n("5e42").default,uCode:n("79ab").default},a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"page_wrap"},[n("v-uni-view",{staticClass:"input_wrap"},[n("u-form",{ref:"form",attrs:{model:e.model,rules:e.rules}},["account"==e.loginType?[n("u-form-item",{attrs:{prop:"customerName"}},[n("v-uni-view",{staticClass:"input_item"},[n("u-input",{attrs:{placeholder:"请输入账号",border:"bottom"},model:{value:e.model.customerName,callback:function(t){e.$set(e.model,"customerName",t)},expression:"model.customerName"}},[n("template",{slot:"prefix"},[n("v-uni-text",{staticClass:"label"},[e._v("账号")])],1)],2)],1)],1),n("u-form-item",{attrs:{prop:"password"}},[n("v-uni-view",{staticClass:"input_item "},[n("u-input",{attrs:{type:"password",placeholder:"请输入密码",border:"none"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}},[n("template",{slot:"prefix"},[n("v-uni-text",{staticClass:"label"},[e._v("密码")])],1),n("template",{slot:"suffix"},[n("v-uni-text",{staticClass:"forget",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navTo("./find")}}},[e._v("忘记密码？")])],1)],2)],1)],1)]:[n("u-form-item",{attrs:{prop:"mobile"}},[n("v-uni-view",{staticClass:"input_item"},[n("u-input",{attrs:{max:!0,placeholder:"请输入手机号",border:"bottom"},model:{value:e.model.mobile,callback:function(t){e.$set(e.model,"mobile",t)},expression:"model.mobile"}},[n("template",{slot:"prefix"},[n("v-uni-text",{staticClass:"label"},[e._v("手机号")])],1)],2)],1)],1),n("u-form-item",{attrs:{prop:"smsCode"}},[n("v-uni-view",{staticClass:"input_item "},[n("u-input",{attrs:{placeholder:"请输入验证码",border:"none"},model:{value:e.model.smsCode,callback:function(t){e.$set(e.model,"smsCode",t)},expression:"model.smsCode"}},[n("template",{slot:"prefix"},[n("v-uni-text",{staticClass:"label"},[e._v("验证码")])],1),n("template",{slot:"suffix"},[n("u-code",{ref:"uCode",attrs:{seconds:"60",changeText:"X秒重新获取"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.codeChange.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"get_code",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCode.apply(void 0,arguments)}}},[e._v(e._s(e.tips))])],1)],2)],1)],1)]],2),n("v-uni-view",{staticClass:"agreement row"},[n("v-uni-image",{attrs:{src:e.isAgree?"https://b2bmall2022.oss-cn-hangzhou.aliyuncs.com/quanzhong%402x.png":"https://b2bmall2022.oss-cn-hangzhou.aliyuncs.com/quan1%402x.png",mode:"widthFix"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.agreeHandle.apply(void 0,arguments)}}}),n("v-uni-text",[e._v("我已阅读并同意以下条款"),n("v-uni-text",{staticClass:"link"},[e._v("《好运邻里服务协议及隐私政策》》")])],1)],1)],1),n("v-uni-view",{staticClass:"btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login.apply(void 0,arguments)}}},[e._v("登录")]),n("v-uni-view",{staticClass:"btn code",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeLogin.apply(void 0,arguments)}}},[e._v(e._s("account"==e.loginType?"验证码登录":"账号登录"))]),n("v-uni-view",{staticClass:"btn code",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navTo("./register")}}},[e._v("没有账号？去注册")])],1)},o=[]},ce9b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;n("3e0a");var i={data:function(){var e=this;return{isAgree:!1,model:{customerName:"",password:""},rules:{customerName:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:["change","blur"]},{validator:function(t,n,i){return e.$u.test.mobile(n)},message:"手机号码不正确",trigger:["change","blur"]}],smsCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},tips:"",loginType:"account"}},onReady:function(){this.$refs.form.setRules(this.rules)},methods:{agreeHandle:function(){this.isAgree=!this.isAgree},login:function(){var e=this;if(this.isAgree){var t="account"==this.loginType?"api/customer/login":"api/customer/mobileLogin";this.$refs.form.validate().then((function(n){e.$http(t,e.model,"post").then((function(t){uni.setStorageSync("token",t.token),e.$http("api/customer/checkCertification",{},"post").then((function(e){uni.showToast({title:"登录成功",icon:"none"}),setTimeout((function(){uni.navigateBack()}),2e3)})).catch((function(n){uni.showToast({title:t.msg,icon:"none"}),setTimeout((function(){e.navTo("/pagesA/Clientele/index")}),2e3)}))}))})).catch((function(e){console.log(111,e)}))}else uni.showToast({title:"请先阅读并同意服务协议与隐私政策",icon:"none"})},changeLogin:function(){this.loginType="account"==this.loginType?"phone":"account","phone"==this.loginType?this.model={mobile:"",smsCode:""}:this.model={customerName:"",password:""}},codeChange:function(e){this.tips=e},getCode:function(){this.$http("api/customer/getSmsCode",{mobile:this.model.mobile},"post").then((function(e){console.log(e)}))}}};t.default=i},d25e:function(e,t,n){"use strict";n.r(t);var i=n("b5d9"),a=n("adb0");for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("390f");var s,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"1646070b",null,!1,i["a"],s);t["default"]=u.exports}}]);